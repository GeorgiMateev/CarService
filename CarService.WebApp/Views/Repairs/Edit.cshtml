@model CarService.WebApp.Models.Repairs.RepairCardModel

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
    <h2>Edit repair card and car information</h2>
</hgroup>

@using(Html.BeginForm("Edit", "Repairs"))
{
    @Html.ValidationSummary(true, "Edit operation was unsuccessful. Please correct the errors and try again.")
    <fieldset>
        <legend>Edit repair card information</legend>
        <ul style="float:left; margin-right:30px;">
            @Html.HiddenFor(m => m.Id)
            <li>
                @Html.LabelFor(m => m.Description)
                @Html.TextAreaFor(m => m.Description)
                @Html.ValidationMessageFor(m => m.Description)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.RegistrationNumber)
                @Html.TextBoxFor(m => m.Car.RegistrationNumber)
                @Html.ValidationMessageFor(m => m.Car.RegistrationNumber)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.FrameNumber)
                @Html.TextBoxFor(m => m.Car.FrameNumber)
                @Html.ValidationMessageFor(m => m.Car.FrameNumber)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.EngineNumber)
                @Html.TextBoxFor(m => m.Car.EngineNumber)
                @Html.ValidationMessageFor(m => m.Car.EngineNumber)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.Brand)
                @Html.TextBoxFor(m => m.Car.Brand)
                @Html.ValidationMessageFor(m => m.Car.Brand)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.Model)
                @Html.TextBoxFor(m => m.Car.Model)
                @Html.ValidationMessageFor(m => m.Car.Model)
            </li>
            @*<li>
                @Html.LabelFor(m => m.ProductionYear)
                @Html.TextBoxFor(m => m.ProductionYear)
                @Html.ValidationMessageFor(m => m.ProductionYear)
            </li>*@
            <li>
                @Html.LabelFor(m => m.Car.OwnerName)
                @Html.TextBoxFor(m => m.Car.OwnerName)
                @Html.ValidationMessageFor(m => m.Car.OwnerName)
            </li>
            <li>
                @Html.LabelFor(m => m.Car.OwnerNumber)
                @Html.TextBoxFor(m => m.Car.OwnerNumber)
                @Html.ValidationMessageFor(m => m.Car.OwnerNumber)
            </li>
            <li>
                @Html.LabelFor(m => m.Mechanics)
                @Html.HiddenFor(m => m.Mechanics)
                @Html.DropDownListFor(m => m.MechanicId, new SelectList(Model.Mechanics,"Id", "FirstName"))
                @Html.ValidationMessageFor(m => m.Car.OwnerNumber)
            </li>
                @Html.LabelFor(m => m.SparePartsPrice)
                @Html.HiddenFor(m => m.SparePartsPrice)
                @Html.DisplayFor(m => m.SparePartsPrice)
            <li>
                @Html.LabelFor(m => m.RepairPrice)
                @Html.TextBoxFor(m => m.RepairPrice)
                @Html.ValidationMessageFor(m => m.RepairPrice)
            </li>
            <li>
                @Html.LabelFor(m => m.Completed)
                @Html.CheckBoxFor(m =>m.Completed)
                @Html.ValidationMessageFor(m => m.Completed)
            </li>
        </ul>

        <ul>
            @for (int i = 0; i < Model.SpareParts.Count(); i++)
            {
                <li>
                    @Html.HiddenFor(m => m.SpareParts[i].Id)
                    @Html.CheckBoxFor(m => m.SpareParts[i].IsSelected)
                    @Html.DisplayFor(m => m.SpareParts[i].Name)
                    @Html.HiddenFor(m => m.SpareParts[i].Name)
                    Price: @Html.DisplayFor(m => m.SpareParts[i].Price)
                    @Html.HiddenFor(m => m.SpareParts[i].Price)
                </li>
            }
        </ul>
        <input type="submit" name="Edit" value="Edit" style="margin-top:50px"/>
    </fieldset>
}
